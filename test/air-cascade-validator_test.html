<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>air-cascade-validator test</title>

    <script src="../../@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script src="../../wct-browser-legacy/browser.js"></script>

    <script type="module" src="../air-cascade-validator.js"></script>

    <script type="module" src="../../@polymer/paper-input/paper-input.js"></script>

</head>
<body>

<test-fixture id="BasicTestFixture">
    <template is="dom-template">
        <air-cascade-validator>
            <paper-input label="Firstname" value="Korben" required></paper-input>
            <paper-input label="Lastname" value="Dallas" required></paper-input>
        </air-cascade-validator>
    </template>
</test-fixture>

<test-fixture id="UnvalidBasicTestFixture">
    <template is="dom-template">
        <air-cascade-validator debug>
            <paper-input label="Firstname" value="Leeloo" required></paper-input>
            <paper-input label="Lastname" value="" required></paper-input>
            <paper-input label="Email" value="ddd" type="email"></paper-input>
        </air-cascade-validator>
    </template>
</test-fixture>

<script type="module">
import '../air-cascade-validator.js';
import '@polymer/paper-input/paper-input.js';
import { Base } from '@polymer/polymer/polymer-legacy.js';
suite('air-cascade-validator', function () {

    test('test valid element', function (done) {
        let element = fixture('BasicTestFixture');
        Base.async(() => {
            let isValid = element.validate();
            assert.isTrue(isValid, 'it should be a valid form');
            let elementShadowRoot = element.shadowRoot;
            let elementHeader = elementShadowRoot.querySelector('paper-input');
            done();
        });
    });

    test('test unvalid element', function (done) {
        // Create a test fixture
        let element = fixture('UnvalidBasicTestFixture');
        Base.async(() => {
            let isValid = element.validate();
            console.log('Test result validate:', isValid);
            assert.isFalse(isValid, 'it should be a invalid form');
            let elementShadowRoot = element.shadowRoot;
//            let elementHeader = elementShadowRoot.querySelector('paper-input');
//            assert.equal(elementHeader.innerHTML, 'Hello new-prop1!');
            done();
        });
    });

});
</script>

</body>
</html>
